<div style="display: flex; flex-direction: column;">
  <!-- Grid Toggle Row -->
  <div style="display: flex; justify-content: space-between; align-items: center; width: 100%;" class="container">
    <!-- Fixed-width container for toggle boxes -->
    <div style="width: 100px; padding-left: 15px;">
      <div style="display: flex; gap: 5px;" *ngIf="hasBothDatasets">
        <div style="display: flex; align-items: center; gap: 2px;">
          <input type="checkbox" class="boxInput left-box" (input)="toggleX()" checked>
          <span style="font-size: 14px;">X</span>
        </div>
        <div style="display: flex; align-items: center; gap: 2px;">
          <input type="checkbox" class="boxInput right-box" (input)="toggleY()" checked>
          <span style="font-size: 14px;">Y</span>
        </div>
      </div>
    </div>
    <!-- Grid toggle always right-aligned -->
    <div style="display: flex; align-items: center; gap: 5px;">
      <label class="switch">
        <input type="checkbox" (change)="onToggleGrid($event)" checked>
        <span class="slider round"></span>
      </label>
      <span style="font-size: 14px">Show Grid</span>
    </div>
  </div>
 <!-- Graph Canvas -->
  
 <div style="position: relative; display: inline-block; width: 300px; height: 300px;">
    <canvas #graphCanvas style="width: 100%; height: 100%;"></canvas>
    <canvas #overlayCanvas style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none;"></canvas>
  </div>
 <!-- Download Buttons -->
  <div class="button-group">
    <button (click)="downloadCSV()" class="download-btn">Download CSV</button>
    <button (click)="downloadPNG()" class="download-btn">Download PNG</button>
  </div>
 </div>